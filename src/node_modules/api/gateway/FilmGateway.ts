import {urlAPI} from 'api/Configuration';
import {MakeFetchService, FetchInterface} from 'services/FetchService';

export function MakeFilmGateway(fetchService?: FetchInterface, url?: any): FilmInterface{
    return new FilmGateway(fetchService || MakeFetchService(), url || urlAPI);
}

export interface FilmInterface {
    getFilmByKeyword(keyword: string): any;
}


export class FilmGateway implements FilmInterface {
    private fetchService: FetchInterface;
    private url: any;

    constructor (fetchService: FetchInterface, url: any) {
        this.fetchService = fetchService;
        this.url = url;
    }

    public getFilmByKeyword(keyword: string){
        return this.fetchService.sendRequest('GET', `http://www.omdbapi.com/?t=${keyword}&plot=full`);
    }
}